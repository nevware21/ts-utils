<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>objDeepCopy | @nevware21/ts-utils</title><meta name="description" content="Documentation for @nevware21/ts-utils"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@nevware21/ts-utils</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">@nevware21/ts-utils</a></li><li><a href="objDeepCopy.html">objDeepCopy</a></li></ul><h1>Function objDeepCopy</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="objDeepCopy" class="tsd-anchor"></a><span class="tsd-kind-call-signature">obj<wbr/>Deep<wbr/>Copy</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="objDeepCopy.html#objDeepCopy.T">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">source</span>, <span class="tsd-kind-parameter">handler</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a class="tsd-signature-type tsd-kind-type-parameter" href="objDeepCopy.html#objDeepCopy.T">T</a><a href="#objDeepCopy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Performs a deep copy of the source object, this is designed to work with base (plain) objects, arrays and primitives
if the source object contains class objects they will either be not cloned or may be considered non-operational after
performing a deep copy. ie. This is performing a deep copy of the objects properties so that altering the copy will
not mutate the source object hierarchy.
Automatic handling of recursive properties was added in v0.4.4.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="objDeepCopy.T" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">source</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="objDeepCopy.html#objDeepCopy.T">T</a></span><div class="tsd-comment tsd-typography"><p>The source object to be copied</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">handler</span>: <a href="../types/ObjDeepCopyHandler.html" class="tsd-signature-type tsd-kind-type-alias">ObjDeepCopyHandler</a></span><div class="tsd-comment tsd-typography"><p>An optional callback that lets you provide / overide the deep cloning (Since 0.4.4)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="objDeepCopy.html#objDeepCopy.T">T</a></h4><p>A new object which contains a deep copy of the source properties</p>
<div class="tsd-comment tsd-typography"><h4 class="tsd-anchor-link"><a id="Example" class="tsd-anchor"></a>Example<a href="#Example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1">: </span><span class="hl-3">any</span><span class="hl-1"> = { </span><span class="hl-2">a:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> };</span><br/><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-2">b</span><span class="hl-1">: </span><span class="hl-3">any</span><span class="hl-1"> = { </span><span class="hl-2">b:</span><span class="hl-1"> </span><span class="hl-7">2</span><span class="hl-1">, </span><span class="hl-2">d:</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-5">Date</span><span class="hl-1">(), </span><span class="hl-2">e:</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-5">TestClass</span><span class="hl-1">(</span><span class="hl-4">&quot;Hello Darkness&quot;</span><span class="hl-1">) };</span><br/><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1"> = </span><span class="hl-2">b</span><span class="hl-1">;        </span><span class="hl-6">// { a: 1, b: { b: 2} }</span><br/><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1"> = </span><span class="hl-2">a</span><span class="hl-1">;        </span><span class="hl-6">// { a: 1, b: { b: 2, a: { a: 1, { b: 2, a: ... }}}}</span><br/><br/><span class="hl-0">function</span><span class="hl-1"> </span><span class="hl-5">copyHandler</span><span class="hl-1">(</span><span class="hl-2">details</span><span class="hl-1">: </span><span class="hl-3">IObjDeepCopyHandlerDetails</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">// details.origin === a</span><br/><span class="hl-1">    </span><span class="hl-6">// details.path[] is the path to the current value</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-2">details</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">isDate</span><span class="hl-1">(</span><span class="hl-2">details</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-6">// So for the date path === [ &quot;b&quot;, &quot;d&quot; ] which represents</span><br/><span class="hl-1">        </span><span class="hl-6">// details.origin[&quot;b&quot;][&quot;d&quot;] === The Date</span><br/><br/><span class="hl-1">        </span><span class="hl-6">// Return true to indicate that we have &quot;handled&quot; the conversion</span><br/><span class="hl-1">        </span><span class="hl-6">// Which in this case will reuse the existing instance (as we didn&#39;t replace details.value)</span><br/><span class="hl-1">        </span><span class="hl-6">// See objCopyProps example for replacing the Date instance</span><br/><span class="hl-1">        </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-2">c</span><span class="hl-1">: </span><span class="hl-3">any</span><span class="hl-1"> = </span><span class="hl-5">objDeepCopy</span><span class="hl-1">(</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-2">copyHandler</span><span class="hl-1">);</span><br/><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">notEqual</span><span class="hl-1">(</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-2">c</span><span class="hl-1">, </span><span class="hl-4">&quot;check a and c are not the same&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1"> === </span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-4">&quot;The root object won&#39;t be the same for the target reference&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1"> === </span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">, </span><span class="hl-4">&quot;Check that the 2 &#39;b&#39; references are the same object&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1"> === </span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-4">&quot;Check that the 2 &#39;a&#39; references are the same object&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1"> === </span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">, </span><span class="hl-4">&quot;Check that the 2 &#39;d&#39; references are the same object&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-5">isDate</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">), </span><span class="hl-4">&quot;The copied date is still real &#39;Date&#39; instance&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">equal</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">, </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">, </span><span class="hl-4">&quot;And the copied date is the original date&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">equal</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">.</span><span class="hl-5">getTime</span><span class="hl-1">(), </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">.</span><span class="hl-5">getTime</span><span class="hl-1">(), </span><span class="hl-4">&quot;But the dates are the same&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-5">isObject</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">d</span><span class="hl-1">), </span><span class="hl-4">&quot;The copied date is now an object&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(!</span><span class="hl-5">isError</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">e</span><span class="hl-1">), </span><span class="hl-4">&quot;The copied error is no longer a real &#39;Error&#39; instance&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">ok</span><span class="hl-1">(</span><span class="hl-5">isObject</span><span class="hl-1">(</span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">e</span><span class="hl-1">), </span><span class="hl-4">&quot;The copied error is now an object&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">assert</span><span class="hl-1">.</span><span class="hl-5">equal</span><span class="hl-1">(</span><span class="hl-7">42</span><span class="hl-1">, </span><span class="hl-2">c</span><span class="hl-1">.</span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">, </span><span class="hl-4">&quot;Expect that the local property was copied&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nevware21/ts-utils/blob/main/lib/src/object/copy.ts#L384">lib/src/object/copy.ts:384</a></li></ul></aside></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@nevware21/ts-utils</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>